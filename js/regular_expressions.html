<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /*
        c√≥ 2 c√°ch t·∫°o : 
        new RegExp(pattern[, flags])
        ho·∫∑c
        /pattern/flags; 
        // C√°ch 1:
        const regex = /^abc$/gi;
        // C√°ch 2:
        const regex2 = new RegExp('^abc$', 'gi');
        
        modifiers : 
            i : kh√¥ng ph√¢n bi·ªát hoa th∆∞·ªùng
            g : t√¨m to√†n chu·ªói, k d·ª´ng l·∫°i ·ªü ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n
            m: t√¨m tr√™n nhi·ªÅu d√≤ng

        pattern: 
            [abc] : t√¨m t·∫•t c·∫£ k√≠ t·ª± gi·ªØa d·∫•u ngo·∫∑c [a-c]
            [0-9] : t√¨m t·∫•t c·∫£ s·ªë gi·ªØa ngo·∫∑c
            (x|y) : t√¨m c√°c t·ª´ ƒëc ph√¢n c√°ch |
            \d : t√¨m 1 ch·ªØ s·ªë
            \s : t√¨m 1 kho·∫£ng tr·∫Øng
            \b : t√¨m k·∫øt qu·∫£ kh·ªõp \bKEYWORD ho·∫∑c KEYWORD\b
            \uxxxx : Find the Unicode character specified by the hexadecimal number xxxx
            n+ : kh·ªõp v·ªõi b·∫•t k√¨ chu·ªïi n√†o ch·ª©a √≠t nh·∫•t 1 n
            n* : 
        */
      // var str = "Use a Microsoft case \n insensitive regular expression to replace Microsoft with W3Schools in a 1 2 5string";
      // let ex_replace = str.replace(/microsoft/ig, 'Phuong')
      // console.log("ex_replace", ex_replace)
      // let ex_search = str.search(/microsoft/ig)
      // console.log("ex_search", ex_search)
      // let regex = /mi/ig
      // let ex_math = str.match(regex)
      // console.log("ex_math", ex_math)

      // var re = /quick\s(brown).+?(jumps)/gi;
      // var str = "The Quick Brown Fox dadasd dsad Jumps Over The Lazy Dog.";
      // var res = re.exec(str);
      // console.log(res);
      let max_length = 30
      let text = '';
      let str = ' das dsa dsad ds dasd dsa das on {reviews} da'
      const regex = /\{(.*?)\}/g;
      const tag_match = str.match(regex)
      const tag_search = str.search(regex)
      console.log("üöÄ ~ file: regular_expressions.html:52 ~ ex_search", tag_match, tag_search, str.length)

      if(tag_match){
        let tag_length = tag_match[0].length
        const max_length_has_tag = max_length + tag_length - 5
        console.log("lenght", tag_search, max_length_has_tag, (tag_search  < max_length_has_tag && tag_search > max_length - 5));
        if(tag_search  < max_length_has_tag && tag_search > max_length - 5){
          console.log("case 1");
          text = str.length > max_length_has_tag ? str.slice(0, max_length_has_tag - tag_length) : str;
        }else{
          text = str.length > max_length_has_tag ? str.slice(0, max_length_has_tag) : str;
        }
      }else{
          text = str.length > max_length ? str.slice(0, max_length) : str;
      }
      
      console.log(2222, text, text.length);
    </script>
  </body>
</html>
